<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Types · PingPong.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="PingPong.jl logo"/></a><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../">What is PingPong?</a></li></ul></li><li class="is-active"><a class="tocitem" href>Types</a><ul class="internal"><li><a class="tocitem" href="#Instruments"><span>Instruments</span></a></li><li><a class="tocitem" href="#Asset-instances"><span>Asset instances</span></a></li><li><a class="tocitem" href="#Positions"><span>Positions</span></a></li><li><a class="tocitem" href="#Orders"><span>Orders</span></a></li><li><a class="tocitem" href="#Trades"><span>Trades</span></a></li><li><a class="tocitem" href="#Dates"><span>Dates</span></a></li><li><a class="tocitem" href="#OHLCV"><span>OHLCV</span></a></li></ul></li><li><a class="tocitem" href="../strategy/">Strategies</a></li><li><span class="tocitem">Engine</span><ul><li><a class="tocitem" href="../engine/engine/">Executors</a></li><li><a class="tocitem" href="../engine/backtesting/">Backtesting</a></li><li><a class="tocitem" href="../engine/paper/">Paper</a></li></ul></li><li><a class="tocitem" href="../exchanges/">Exchanges</a></li><li><a class="tocitem" href="../data/">Data</a></li><li><span class="tocitem">Watchers</span><ul><li><a class="tocitem" href="../watchers/watchers/">Interface</a></li><li><input class="collapse-toggle" id="menuitem-7-2" type="checkbox"/><label class="tocitem" for="menuitem-7-2"><span class="docs-label">Apis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../watchers/apis/coingecko/">CoinGecko</a></li><li><a class="tocitem" href="../watchers/apis/coinpaprika/">CoinPaprika</a></li><li><a class="tocitem" href="../watchers/apis/coinmarketcap/">CoinMarketCap</a></li></ul></li></ul></li><li><a class="tocitem" href="../stats/">Stats</a></li><li><a class="tocitem" href="../optimization/">Optimization</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><span class="tocitem">Misc</span><ul><li><a class="tocitem" href="../config/">Config</a></li><li><a class="tocitem" href="../disambiguation/">Disambiguation</a></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../devdocs/">Devdocs</a></li><li><a class="tocitem" href="../contacts/">Contacts</a></li></ul></li><li><span class="tocitem">Customizations</span><ul><li><a class="tocitem" href="../customizations/customizations/">Overview</a></li><li><a class="tocitem" href="../customizations/orders/">Orders</a></li><li><a class="tocitem" href="../customizations/backtest/">Backtester</a></li><li><a class="tocitem" href="../customizations/exchanges/">Exchanges</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../API/collections/">Collections</a></li><li><a class="tocitem" href="../API/data/">Data</a></li><li><a class="tocitem" href="../API/executors/">Engine</a></li><li><a class="tocitem" href="../API/instances/">Instances</a></li><li><a class="tocitem" href="../API/instruments/">Instruments</a></li><li><a class="tocitem" href="../API/misc/">Misc</a></li><li><a class="tocitem" href="../API/optimization/">Optimization</a></li><li><a class="tocitem" href="../API/pbar/">Pbar</a></li><li><a class="tocitem" href="../API/plotting/">Plotting</a></li><li><a class="tocitem" href="../API/prices/">Prices</a></li><li><a class="tocitem" href="../API/processing/">Processing</a></li><li><a class="tocitem" href="../API/stats/">Stats</a></li><li><a class="tocitem" href="../API/strategies/">Strategies</a></li><li><input class="collapse-toggle" id="menuitem-13-14" type="checkbox"/><label class="tocitem" for="menuitem-13-14"><span class="docs-label">Analysis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../API/analysis/analysis/">Analysis</a></li><li><a class="tocitem" href="../API/analysis/mlong/">MLong</a></li><li><a class="tocitem" href="../API/analysis/mshort/">MShort</a></li><li><a class="tocitem" href="../API/analysis/mvp/">MVP</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Types</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/panifie/PingPong.jl/blob/master/docs/src/types.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h1><p>By learning the main types you get to know the building blocks to start composing your strategy for backtesting and/or live trading.</p><div class="admonition is-info"><header class="admonition-header">Numbered types</header><div class="admonition-body"><p>Some types have a number at the end, you can just ignore it, eventually it will be removed.</p></div></div><p>The main type is the <code>Strategy</code> and it has its own <a href="../strategy/">page</a>. Other important types follow.</p><h2 id="Instruments"><a class="docs-heading-anchor" href="#Instruments">Instruments</a><a id="Instruments-1"></a><a class="docs-heading-anchor-permalink" href="#Instruments" title="Permalink"></a></h2><p><code>Asset</code> and <code>Derivative</code> are implementations of the <code>AbstractAsset</code> abstract type, defined in the <code>Instruments</code> package. They are what we get usually after parsing a string. <code>Asset</code>s are most of the time a <em>spot</em> pair of base and quote currency. A <code>Derivative</code> is instead either a <em>swap</em> or a contract with a settlment date. These are &quot;static&quot; kind of structures that don&#39;t query real time data. The only information they hold is what can be parsed by the string itself.</p><ul><li><code>raw</code>: The substring that was parsed.</li><li><code>bc</code>: base currency</li><li><code>qc</code>: quote currency</li><li><code>fiat</code>: <code>true</code> if the pair involves to &quot;stable&quot; currencies, which is a static list defined in <code>Instruments.fiatnames</code></li><li><code>leveraged</code>: <code>true</code> if the base currency is a <em>leveraged</em> token, which is a kind of token that usually involves periodic rebalancing. This should be considered only as additional info, and unreliable, since there isn&#39;t a standard for naming such assets.</li><li><code>unleveraged_bc</code>: if the pair is leveraged, this should return the base currency without the &quot;multiplier&quot;, such that you can use it to find similar markets of the same currency.</li></ul><h5 id="Derivatives-only-fields"><a class="docs-heading-anchor" href="#Derivatives-only-fields">Derivatives only fields</a><a id="Derivatives-only-fields-1"></a><a class="docs-heading-anchor-permalink" href="#Derivatives-only-fields" title="Permalink"></a></h5><ul><li><code>asset</code>: the simpler <code>Asset</code> type which forwards all its fields.</li><li><code>sc</code>: the settlement currency</li><li><code>id</code>: a string, usually representing the settlement date</li><li><code>strike</code>: strike price of the contract</li><li><code>kind</code>: if its an option, either <code>Call</code> or <code>Put</code>, otherwise <code>Unkn</code> (unknown)</li></ul><p><code>Asset</code> can be conveniently constructed from the REPL using <code>a&quot;BTC/USDT&quot;</code> or <code>d&quot;BTC/USDT:USDT&quot;</code> for <code>Derivative</code>s.</p><h2 id="Asset-instances"><a class="docs-heading-anchor" href="#Asset-instances">Asset instances</a><a id="Asset-instances-1"></a><a class="docs-heading-anchor-permalink" href="#Asset-instances" title="Permalink"></a></h2><p>The <code>AssetInstance</code> is the richer type that refers to a particular asset, they are <em>not</em> parametrized over a particular asset (as that would cause &quot;type explosion&quot;) but only over the <code>AbstractAsset</code> implementation, the exchange and the margin mode. An asset instance information is therefore always related to a specific exchange, <code>cash(ai)</code> for example should return how much cash is available for that asset on the exchange matching the instance ExchangeID parameter.</p><ul><li><code>asset</code>: The underlying implementaion of <code>AbstractAsset</code></li><li><code>data</code>: a <code>SortedDict</code> (smallest to largest) of ohlcv data. The key is is a <code>TimeFrame</code>, the value is a <code>DataFrame</code> with columns timestamp,high,open,low,close,volume.</li><li><code>history</code>: the trades history of the asset</li><li><code>logs</code>: <code>AssetEvents</code> like leverage updates in case of assets with active margin.</li><li><code>cash</code>: owned cash</li><li><code>cash_committed</code>: total cash used by pending orders</li><li><code>exchange</code>: the exchange of this asset instance</li><li><code>longpos/shortpos</code> the <code>Position</code>s when margin mode is activate. <code>committed/cash</code> refers to the position cash within margin trading.</li><li><code>limits/precision</code>: see <a href="https://docs.ccxt.com/#/README?id=precision-and-limits">ccxt</a></li><li><code>fees</code>: the fees in decimal percentage for trading for taker or maker.</li></ul><h2 id="Positions"><a class="docs-heading-anchor" href="#Positions">Positions</a><a id="Positions-1"></a><a class="docs-heading-anchor-permalink" href="#Positions" title="Permalink"></a></h2><p>When trading with margin, asset instances state manage the status of long or short positions. In <code>NotHedged</code> mode (the default) you can only have either a long or short position open at any given time. Positions <code>cash</code> and <code>cash_committed</code> replace the asset instance own fields.</p><ul><li><code>status</code>: If the position is either open <code>PositionOpen()</code> or close <code>PositionClose()</code>.</li><li><code>asset</code>: <code>Derivative</code> inherited from the asset instance</li><li><code>timestamp</code>: the last time the position was updated either by updating leverage, adding margin or increasing the position.</li><li><code>liquidation_price</code>: the price that would trigger a liquidation event</li><li><code>entryprice</code>: the average price of entry of the position</li><li><code>maintenance_margin</code>: the minimum margin required to avoid liquidation (in quote currency)</li><li><code>initial_margin</code>: the minimum margin required to open the position</li><li><code>additional_margin</code>: margin added on top of the initial margin</li><li><code>notional</code>: the value of the position w.r.t. the current price</li><li><code>cash/cash_committed</code>: the amount held, should always be equal to number of contracts multiplied by the contract size.</li><li><code>leverage</code>: the leverage factor</li><li><code>min_size</code>: same as <code>limits.cost.min</code> of the asset instance</li><li><code>hedged</code>: <code>true</code> if margin mode is hedged.</li><li><code>tiers</code>: it is a <code>LeverageTiersDict</code> defined in the <code>Exchanges</code> module. It is parsed from ccxt, it is required to fetch the correct maintenance margin rate w.r.t. the position size.</li><li><code>this_tier</code>: the current tier of the position, updated when the notional value changes.</li></ul><h2 id="Orders"><a class="docs-heading-anchor" href="#Orders">Orders</a><a id="Orders-1"></a><a class="docs-heading-anchor-permalink" href="#Orders" title="Permalink"></a></h2><p>Orders types parameters are:</p><ul><li><code>OrderType{&lt;:OrderSide}</code>: The order type is an abstract type with the <code>OrderSide</code> parameter which is <code>Buy</code>, <code>Sell</code>, and rarely <code>Both</code>. An <code>OrderType</code> can be for example a <code>LimitOrderType</code> or a <code>MarketOrderType</code>. These types are themselves supertypes for more specific orders like <code>FOKOrderType</code> and <code>GTCOrderType</code>. Creating order instances parametrized with different kinds should produce different behaviour in order execution.</li><li><code>AbstractAsset</code>, <code>ExchangeID</code>: same as asset instances, orders refer to a kind of asset on a specific exchange.</li><li><code>PositionSide</code>: either <code>Long</code> or <code>Short</code>, the order refer to either a long or short position. Once the order is filled, it&#39;s amount will be added to the cash of the matching position.</li></ul><p>Orders have mostly simple data fields:</p><ul><li><code>asset</code>: the <code>AbstractAsset</code> implementation that refers to it</li><li><code>exc</code>: the <code>ExchangeID</code> of the matching exchange</li><li><code>date</code>: the date the order was opened</li><li><code>price</code>: the target price of the order, for market orders this would be the last price before the order was opened.</li><li><code>amount</code>: the total amount requested by the order</li><li><code>attrs</code>: A unspecified named tuple that is used to hold custom data specific to order types.</li></ul><h2 id="Trades"><a class="docs-heading-anchor" href="#Trades">Trades</a><a id="Trades-1"></a><a class="docs-heading-anchor-permalink" href="#Trades" title="Permalink"></a></h2><p>Trades are &quot;atomic&quot; events, orders are composed of one or more trades. They have the same type parameters as the orders, a trade for a specific order matches its exact type parameters.</p><ul><li><code>order</code>: the order to which this trade belongs to</li><li><code>date</code>: execution date of the trade</li><li><code>amount</code>: The sum of the amounts of all the trades performed by an order is always below or equal the order amount.</li><li><code>price</code>: the price can differ from the order price depending on wheter the order is a limit or market order.</li><li><code>value</code>: <code>price * amount</code></li><li><code>fees</code>: the fees of the trade, in quote currency, they can be positive or negative (they are favorable if negative)</li><li><code>size</code>: <code>price * amount +/- fees</code></li><li><code>leverage</code>: the leverage that was used for the order and which the trade was executed with. We currently don&#39;t allow to change the leverage while there are open orders, therefore trades that belong to the same order should have the same leverage. Without margin the leverage should be always equal to <code>1.0</code>.</li></ul><h2 id="Dates"><a class="docs-heading-anchor" href="#Dates">Dates</a><a id="Dates-1"></a><a class="docs-heading-anchor-permalink" href="#Dates" title="Permalink"></a></h2><p>The julia main <code>Dates</code> package is never imported directly. It is instead exported by the package <code>TimeTicks</code> which among many utility functions overrides the <code>now</code> function to always use the <code>UTC</code> timezone. A very important type is the <code>TimeFrame</code> type which defines a segment of time, most of the times the <em>concrete</em> type of a <code>TimeFrame</code> will be a time period (<code>Dates.Period</code>).</p><p>For convenience timeframes can be constructed like <code>tf&quot;1m&quot;</code> for a 1 minute timeframe. This notation can be freely used as you like because by using the macro, the timeframe is replaced at compiled time, moreover construction is cached and the instances are singletons (<code>@assert tf&quot;1m&quot; === tf&quot;1m&quot;</code>). Parsing is also cached but only by calling <code>convert(TimeFrame, v)</code> or <code>timeframe(v)</code> and spend only the lookup cost (<code>~500ns</code>). The parsing is done to matching timeframe naming used within CCTX, and the timeperiod use should be expect to be in <code>Millisecond</code>.</p><p>Dates can also be constructed within the repl using the dt prefix like <code>dt&quot;2020-&quot;</code> will create a <code>DateTime</code> value for the date <code>2020-01-01T00:00:00</code>. We also implement a <code>DateRange</code> which is used to keep track of the time between two dates, and it also works as an iterator when the step field (<code>Period</code>) is defined. Date ranges can be conveniently created using the prefix dtr like <code>dtr&quot;2020-..2021-&quot; will construct a daterange for the full year 2020. You can specify the date precision up to the second as specified by the standard like</code>dtr&quot;2020-01-01T:00:00:01..2021-01-01T00:00:01&quot;</p><h2 id="OHLCV"><a class="docs-heading-anchor" href="#OHLCV">OHLCV</a><a id="OHLCV-1"></a><a class="docs-heading-anchor-permalink" href="#OHLCV" title="Permalink"></a></h2><p>We use the <code>DataFrames</code> package, so when we refer to ohlcv data there is a <code>DataFrame</code> involved. Within the <code>Data</code> package there multiple utility functions to deal with ohlcv data, like <code>ohlcv/at(df, date)</code> to get the value of a column at a particular index by date, for example <code>closeat(df, date)</code>. We implemented date indexing for dataframes so you can also directly call <code>df[dt&quot;2020-01-01&quot;, :close]</code> to fetch the close value at the nearest matching date, or use a <code>DateRange</code> to slice the dataframe for the rows within the daterange time span (<code>df[dtr&quot;2020-..2021-&quot;]</code>). </p><p>There are utility functions for <em>guessing</em> the timeframe of ohlcv data frame by looking at the difference between timestamps, calling <code>timeframe!(df)</code> will set the &quot;timeframe&quot; key on the metadata of the <em>timestamp</em> column of the dataframe.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« What is PingPong?</a><a class="docs-footer-nextpage" href="../strategy/">Strategies »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 25 July 2023 11:17">Tuesday 25 July 2023</span>. Using Julia version 1.10.0-alpha1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
