<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data · PingPong.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PingPong.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">PingPong docs</a></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../strategy/">Strategy interface</a></li><li><a class="tocitem" href="../engine/engine/">Engine</a></li><li><a class="tocitem" href="../exchanges/">Exchanges</a></li><li class="is-active"><a class="tocitem" href>Data</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Prices"><span>Prices</span></a></li></ul></li><li><a class="tocitem" href="../processing/">Processing</a></li><li><span class="tocitem">Watchers</span><ul><li><a class="tocitem" href="../watchers/watchers/">Watchers</a></li><li><a class="tocitem" href="../watchers/apis/coingecko/">CoinGecko</a></li><li><a class="tocitem" href="../watchers/apis/coinpaprika/">CoinPaprika</a></li><li><a class="tocitem" href="../watchers/apis/coinmarketcap/">CoinMarketCap</a></li></ul></li><li><a class="tocitem" href="../misc/">Misc</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><a class="tocitem" href="../analysis/">Analysis</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/untoreh/PingPong.jl/blob/master/docs/src/data.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Data"><a class="docs-heading-anchor" href="#Data">Data</a><a id="Data-1"></a><a class="docs-heading-anchor-permalink" href="#Data" title="Permalink"></a></h1><p>The main backend currently is Zarr. Zarr is similar to feather or parquet in that it optimizes to columnar data, or in general <em>arrays</em>. However it is simpler, and allows to pick different encoding schemes, and supports compression by default. More over the zarr interface can be backed by different storage layers, that can also be over the network. Compared to no/sql databases columnar storage has the drawback of having to read <em>chunks</em> for queries, but we are almost never are interested in scalar values, we always query a time-series of some sort, so the latency loss is a non issue.</p><article class="docstring"><header><a class="docstring-binding" id="Data.OHLCVTuple" href="#Data.OHLCVTuple"><code>Data.OHLCVTuple</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Similar to a StructArray (and should probably be replaced by it), used for fast conversion.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.ZarrInstance" href="#Data.ZarrInstance"><code>Data.ZarrInstance</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Candles data is stored with hierarchy PAIR -&gt; [TIMEFRAMES...]. A pair is a ZGroup, a timeframe is a ZArray.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/zarr_utils.jl#L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.unique!-Tuple{Function, Zarr.ZArray}" href="#Base.unique!-Tuple{Function, Zarr.ZArray}"><code>Base.unique!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Remove duplicate from a zarray.</p><p>In a 2d zarray where we want values where the second column is unique:</p><pre><code class="language-julia hljs">unique!(x-&gt;x[2], z)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/zarr_utils.jl#L227-L234">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data._load_ohlcv-Tuple{Data.ZarrInstance, Any, Any}" href="#Data._load_ohlcv-Tuple{Data.ZarrInstance, Any, Any}"><code>Data._load_ohlcv</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Load ohlcv pair data from zarr instance. <code>zi</code>: The zarr instance to use <code>key</code>: the name of the array to load from the zarr instance (in the format exchange/timeframe/pair) <code>td</code>: the timeframe (as integer in milliseconds) of the target ohlcv table to be loaded <code>from</code>, <code>to</code>: date range</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L398-L404">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data._save_data-Tuple{Data.ZarrInstance, Any, Any}" href="#Data._save_data-Tuple{Data.ZarrInstance, Any, Any}"><code>Data._save_data</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Saves data to a zarr array ensuring only dates seriality, not contiguity (as opposed to <code>_save_ohlcv</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/series.jl#L99-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.combine_data-Tuple{Any, Any}" href="#Data.combine_data-Tuple{Any, Any}"><code>Data.combine_data</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>combinerows</code> of two (OHLCV) dataframes over using <code>:timestamp</code> column as index.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L114">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.combinerows-Tuple{Any, Any}" href="#Data.combinerows-Tuple{Any, Any}"><code>Data.combinerows</code></a> — <span class="docstring-category">Method</span></header><section><div><p>(Right)Merge two dataframes on key, assuming the key is ordered and unique in both dataframes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.contiguous_ts-Tuple{Any, AbstractString}" href="#Data.contiguous_ts-Tuple{Any, AbstractString}"><code>Data.contiguous_ts</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Checks if a timeseries has any intervals not conforming to the given timeframe.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L460">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.data_td-Tuple{Any}" href="#Data.data_td-Tuple{Any}"><code>Data.data_td</code></a> — <span class="docstring-category">Method</span></header><section><div><p>The time interval of the dataframe, guesses from the difference between the first two rows.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L108">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.empty_ohlcv-Tuple{}" href="#Data.empty_ohlcv-Tuple{}"><code>Data.empty_ohlcv</code></a> — <span class="docstring-category">Method</span></header><section><div><p>An empty OHLCV dataframe.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L292">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.load-Tuple{Data.ZarrInstance, Any, Any, Any}" href="#Data.load-Tuple{Data.ZarrInstance, Any, Any, Any}"><code>Data.load</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Load a pair ohlcv data from storage. <code>as_z</code>: returns the ZArray</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L355-L358">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.load_data-Tuple{Data.ZarrInstance, Any}" href="#Data.load_data-Tuple{Data.ZarrInstance, Any}"><code>Data.load_data</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Load data from zarr instance. <code>zi</code>: The zarr instance to use <code>key</code>: the name of the array to load from the zarr instance (full key path). <code>type</code>: Set to the type that zarr should use to store the data (only bits types). [Float64]. <code>serialized</code>: If set, data will be deserialized before returned (<code>type</code> is ignored). <code>from</code>, <code>to</code>: date range</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/series.jl#L186-L193">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.load_ohlcv-Tuple{Data.ZarrInstance, Any, Any, Any}" href="#Data.load_ohlcv-Tuple{Data.ZarrInstance, Any, Any, Any}"><code>Data.load_ohlcv</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Load data from given zarr instance, exchange, pairs list and timeframe.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L310">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.pair_key-Tuple{Any, Any, Any}" href="#Data.pair_key-Tuple{Any, Any, Any}"><code>Data.pair_key</code></a> — <span class="docstring-category">Method</span></header><section><div><p>The full key of the data stored for the (exchange, pair, timeframe) combination.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L287">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.sanitize_pair-Tuple{AbstractString}" href="#Data.sanitize_pair-Tuple{AbstractString}"><code>Data.sanitize_pair</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Normalizes or special characthers separators to <code>_</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L284">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.save_ohlcv-Tuple{Data.ZarrInstance, Vararg{Any, 4}}" href="#Data.save_ohlcv-Tuple{Data.ZarrInstance, Vararg{Any, 4}}"><code>Data.save_ohlcv</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>data_col</code>: the timestamp column of the new data (1) <code>saved_col</code>: the timestamp column of the existing data (1) <code>pair</code>: the trading pair (BASE/QUOTE string) <code>timeframe</code>: exchange timeframe (from exc.timeframes) <code>type</code>: Primitive type used for storing the data (Float64)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L175-L181">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.to_ohlcv-Tuple{Matrix}" href="#Data.to_ohlcv-Tuple{Matrix}"><code>Data.to_ohlcv</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Convert raw ccxt OHLCV data (matrix) to a dataframe.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L367">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.zdelete!-Tuple{Zarr.ZArray, Union{Nothing, Dates.DateTime}, Union{Nothing, Dates.DateTime}}" href="#Data.zdelete!-Tuple{Zarr.ZArray, Union{Nothing, Dates.DateTime}, Union{Nothing, Dates.DateTime}}"><code>Data.zdelete!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Delete elements from a <code>ZArray</code> within the range of dates <code>from_dt:to_dt</code>.</p><p>Use the <code>select</code> function to customize the dates vector where to index th range. Defaults to the first column of a 2D Zarray.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/zarr_utils.jl#L55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.zilmdb" href="#Data.zilmdb"><code>Data.zilmdb</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Create a <code>ZarrInstance</code> at specified <code>path</code> using <code>lmdb</code> as backend.</p><p><code>force</code>: resets the underlying store.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/lmdbstore.jl#L32-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.@as_mat-Tuple{Any}" href="#Data.@as_mat-Tuple{Any}"><code>Data.@as_mat</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Redefines given variable to a Matrix with type of the underlying container type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.@as_ts-Tuple{Any, Any, Vararg{Any}}" href="#Data.@as_ts-Tuple{Any, Any, Vararg{Any}}"><code>Data.@as_ts</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Converts a subset of columns to timeseries.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/ts.jl#L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.@ohlc" href="#Data.@ohlc"><code>Data.@ohlc</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Converts ohlcv dataframe to timeseries type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/ts.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.@otime-Tuple{}" href="#Data.@otime-Tuple{}"><code>Data.@otime</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Get the last date of loaded data (in <code>mrkts</code> variable).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/ts.jl#L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Data.@to_mat" href="#Data.@to_mat"><code>Data.@to_mat</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Same as <code>as_mat</code> but returns the new matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/data.jl#L89">source</a></section></article><h1 id="Prices"><a class="docs-heading-anchor" href="#Prices">Prices</a><a id="Prices-1"></a><a class="docs-heading-anchor-permalink" href="#Prices" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="Main.Prices.gprofit" href="#Main.Prices.gprofit"><code>Main.Prices.gprofit</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Total profit of a ladder of trades</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/prices.jl#L45">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Main.Prices.price_ranges" href="#Main.Prices.price_ranges"><code>Main.Prices.price_ranges</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Given a price, output price at given ratios. (Predefined ratios - :bal,:futures,:tight,:expa)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/prices.jl#L9-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Main.Prices.price_ranges-Tuple{AbstractDict, Vararg{Any}}" href="#Main.Prices.price_ranges-Tuple{AbstractDict, Vararg{Any}}"><code>Main.Prices.price_ranges</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get the price range of a map of pairs, using the last available close price.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/untoreh/PingPong.jl/blob/c582e69c53c031bfa45896a57622fc4672365132/Data/src/prices.jl#L28">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../exchanges/">« Exchanges</a><a class="docs-footer-nextpage" href="../processing/">Processing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 23 February 2023 13:21">Thursday 23 February 2023</span>. Using Julia version 1.9.0-beta4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
