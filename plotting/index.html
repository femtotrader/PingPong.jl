<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Plotting · PingPong.jl</title><meta name="title" content="Plotting · PingPong.jl"/><meta property="og:title" content="Plotting · PingPong.jl"/><meta property="twitter:title" content="Plotting · PingPong.jl"/><meta name="description" content="Documentation for PingPong.jl."/><meta property="og:description" content="Documentation for PingPong.jl."/><meta property="twitter:description" content="Documentation for PingPong.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="PingPong.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../">What is PingPong?</a></li></ul></li><li><a class="tocitem" href="../types/">Types</a></li><li><a class="tocitem" href="../strategy/">Strategies</a></li><li><span class="tocitem">Engine</span><ul><li><a class="tocitem" href="../engine/engine/">Executors</a></li><li><a class="tocitem" href="../engine/backtesting/">Backtesting</a></li><li><a class="tocitem" href="../engine/paper/">Paper</a></li><li><a class="tocitem" href="../engine/live/">Live</a></li><li><a class="tocitem" href="../engine/features/">Features</a></li></ul></li><li><a class="tocitem" href="../exchanges/">Exchanges</a></li><li><a class="tocitem" href="../data/">Data</a></li><li><span class="tocitem">Watchers</span><ul><li><a class="tocitem" href="../watchers/watchers/">Interface</a></li><li><input class="collapse-toggle" id="menuitem-7-2" type="checkbox"/><label class="tocitem" for="menuitem-7-2"><span class="docs-label">Apis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../watchers/apis/coingecko/">CoinGecko</a></li><li><a class="tocitem" href="../watchers/apis/coinpaprika/">CoinPaprika</a></li><li><a class="tocitem" href="../watchers/apis/coinmarketcap/">CoinMarketCap</a></li></ul></li></ul></li><li><a class="tocitem" href="../stats/">Stats</a></li><li><a class="tocitem" href="../optimization/">Optimization</a></li><li class="is-active"><a class="tocitem" href>Plotting</a></li><li><span class="tocitem">Misc</span><ul><li><a class="tocitem" href="../config/">Config</a></li><li><a class="tocitem" href="../disambiguation/">Disambiguation</a></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting</a></li><li><a class="tocitem" href="../devdocs/">Devdocs</a></li><li><a class="tocitem" href="../contacts/">Contacts</a></li></ul></li><li><span class="tocitem">Customizations</span><ul><li><a class="tocitem" href="../customizations/customizations/">Overview</a></li><li><a class="tocitem" href="../customizations/orders/">Orders</a></li><li><a class="tocitem" href="../customizations/backtest/">Backtester</a></li><li><a class="tocitem" href="../customizations/exchanges/">Exchanges</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../API/collections/">Collections</a></li><li><a class="tocitem" href="../API/data/">Data</a></li><li><a class="tocitem" href="../API/executors/">Engine</a></li><li><a class="tocitem" href="../API/instances/">Instances</a></li><li><a class="tocitem" href="../API/instruments/">Instruments</a></li><li><a class="tocitem" href="../API/misc/">Misc</a></li><li><a class="tocitem" href="../API/optimization/">Optimization</a></li><li><a class="tocitem" href="../API/pbar/">Pbar</a></li><li><a class="tocitem" href="../API/plotting/">Plotting</a></li><li><a class="tocitem" href="../API/prices/">Prices</a></li><li><a class="tocitem" href="../API/processing/">Processing</a></li><li><a class="tocitem" href="../API/stats/">Stats</a></li><li><a class="tocitem" href="../API/strategies/">Strategies</a></li><li><input class="collapse-toggle" id="menuitem-13-14" type="checkbox"/><label class="tocitem" for="menuitem-13-14"><span class="docs-label">Analysis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../API/analysis/analysis/">Analysis</a></li><li><a class="tocitem" href="../API/analysis/mlong/">MLong</a></li><li><a class="tocitem" href="../API/analysis/mshort/">MShort</a></li><li><a class="tocitem" href="../API/analysis/mvp/">MVP</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Plotting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Plotting</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/panifie/PingPong.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/panifie/PingPong.jl/blob/master/docs/src/plotting.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>The Plotting module is based on <a href="https://docs.makie.org/stable/">Makie</a>. Backends are not included in the package dependencies so you need to add one yourself:</p><pre><code class="language-julia hljs">] add GLMakie
using GLMakie
# or
] add WGLMakie
using WGLMakie</code></pre><p>PingPong provides recipes for plotting:</p><ul><li>OHLCV</li><li>Fine grained trades history</li><li>Aggregated trades history with volume and balance.</li></ul><div class="admonition is-info"><header class="admonition-header">Interactivity</header><div class="admonition-body"><p>Plots generated using makie interactive backends (GLMakie and WGLMakie) can be dragged and zoomed. There are tooltips (on hover) for candles, trades and balance plots.</p></div></div><h4 id="OHLCV"><a class="docs-heading-anchor" href="#OHLCV">OHLCV</a><a id="OHLCV-1"></a><a class="docs-heading-anchor-permalink" href="#OHLCV" title="Permalink"></a></h4><p>We plot ohlcv data using candlesticks, colored in red/green, and volume bars in the background.</p><pre><code class="language-julia hljs">using Plotting
using Scrapers.BinanceData
df = binanceload(&quot;eth&quot;).data
fig = Plotting.ohlcv(df)
display(fig)</code></pre><p><img src="../assets/ohlcv.gif" alt="OHLCV Plot"/></p><h4 id="Trades-history"><a class="docs-heading-anchor" href="#Trades-history">Trades history</a><a id="Trades-history-1"></a><a class="docs-heading-anchor-permalink" href="#Trades-history" title="Permalink"></a></h4><p>We plot trades history as triangles pointing up for buys and down for sells.</p><pre><code class="language-julia hljs">using Lang
using Strategies
using Engine.Executors.SimMode: SimMode as bt
s = st.strategy(:Example)
ai = s.universe[m&quot;eth&quot;].instance
bt.start!(s)
# Plot the first 100 trades for the first asset matching symbol &quot;eth&quot;
fig = Plotting.tradesticks(s, m&quot;eth&quot;, to=100)
display(fig)</code></pre><p><img src="../assets/tradesticks.jpg" alt="TradesTicks"/></p><h4 id="Aggregated-trades-history-for-single-asset"><a class="docs-heading-anchor" href="#Aggregated-trades-history-for-single-asset">Aggregated trades history for single asset</a><a id="Aggregated-trades-history-for-single-asset-1"></a><a class="docs-heading-anchor-permalink" href="#Aggregated-trades-history-for-single-asset" title="Permalink"></a></h4><p>For a high level view of the trades density there is the <code>balloons</code> function. It aggregates all trades that have happened in a single timeframe. The bigger the circle the higher is the volume. Timeframes with positive volume are considered <em>sells</em> and the opposite for <em>buys</em>. The less transparent the circle the more trades have happened in the timeframe. The plot at the bottom shows the balance, in quote currency held. The first band (orange) is actual cash (from <code>Strategy.cash</code>) while the other (blue) is the value of held assets in quote currency (<code>AssetInstance.cash * price</code>).</p><pre><code class="language-julia hljs"># Aggreggate trades within 1 day for the first asset matching &quot;eth&quot;.
Plotting.balloons(s, m&quot;eth&quot;, tf=tf&quot;1d&quot;)</code></pre><p><img src="../assets/balloons.jpg" alt="Ballons"/></p><h4 id="Aggregated-trades-history-for-multiple-assets"><a class="docs-heading-anchor" href="#Aggregated-trades-history-for-multiple-assets">Aggregated trades history for multiple assets</a><a id="Aggregated-trades-history-for-multiple-assets-1"></a><a class="docs-heading-anchor-permalink" href="#Aggregated-trades-history-for-multiple-assets" title="Permalink"></a></h4><p>When plotting aggregated history for all strategy assets, we overlay balloons over the priceline of each asset. Opacity and balloon radius properties are the same as for single asset plots. Alternatively passing a symbol or a dataframe as <code>benchmark</code> kwarg will plot all aggregations over that single asset OHLCV data.</p><pre><code class="language-julia hljs"># Aggreggate trades within 1 day for all the assets in the strategy universe
Plotting.balloons(s, tf=tf&quot;1w&quot;)</code></pre><p><img src="../assets/balloons-multi.jpg" alt="Ballons Multi"/></p><h4 id="Custom-indicators"><a class="docs-heading-anchor" href="#Custom-indicators">Custom indicators</a><a id="Custom-indicators-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-indicators" title="Permalink"></a></h4><p>For plotting a moving average we can use the <code>line_indicator</code> function.</p><pre><code class="language-julia hljs">analyze!()
using Indicators
m7 = Indicators.sma(df.close, n=7)
m14 = Indicators.sma(df.close, n=14)
fig = Plotting.ohlcv(df);
fig = line_indicator!(fig, m7, m14)
display(fig)</code></pre><p><img src="../assets/line-indicator.jpg" alt="Line Indicator"/></p><p>For channels/envelopes we can use the <code>channel_indicator</code> function.</p><pre><code class="language-julia hljs">bb = Indicators.bbands(df.close)
Plotting.channel_indicator(df, eachcol(bb)...)</code></pre><p><img src="../assets/channel-indicator.jpg" alt="Channel Indicator"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../optimization/">« Optimization</a><a class="docs-footer-nextpage" href="../config/">Config »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Sunday 8 October 2023 17:02">Sunday 8 October 2023</span>. Using Julia version 1.10.0-beta3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
